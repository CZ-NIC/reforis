{% set plugins_dropdown_is_active = request.path[:-1] in plugins_urls %}

<nav id="sidebar">
    <div id="sidebar-header">
        <a href="/">
            <img class="card-img-top" src="{{ url_for('static', filename = 'reforis/imgs/logo-turris.svg') }}">
        </a>
        <p>reForis{% if version is defined %} version {{ version }}{% endif %}</p>
    </div>

    <ul class="list-unstyled">
        <div id="navigation_container"></div>

        <li>
            <a href="#plugins-settings-submenu"
                class="dropdown-toggle {% if plugins_dropdown_is_active %}active{% endif %}"
                data-toggle="collapse"
            >
                <i class="fas fa-fw fa-puzzle-piece"></i>&nbsp;&nbsp;&nbsp;
                {% trans %}Plugins{% endtrans %}
            </a>
            <ul
                class="collapse list-unstyled {% if plugins_dropdown_is_active %} show {% endif %}"
                id="plugins-settings-submenu"
            >
                {% for plugin in plugins %}
                    <li>
                        <a
                            class="text-center {% if request.path.startswith(plugin.url_prefix) %}active{% endif %}"
                            href="{{ plugin.url_prefix }}"
                        >
                            <small>{{ plugin.name }}</small>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </li>
    </ul>
</nav>
